<ion-content>
  <ion-card class="sme-form-card ion-no-margin">
    <ion-card-header>
      <ion-card-title>
        {{
          mode === 'create'
            ? 'Buyer Details'
            : mode === 'update'
            ? 'Edit Buyer Details'
            : 'Buyer Details'
        }}
      </ion-card-title>
      <ion-card-subtitle *ngIf="mode !== 'read'">Please fill all required information</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="buyerForm" (ngSubmit)="onSubmit()">
        <ion-grid>

        <!-- Buyer ID -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-input
                type="text"
                formControlName="buyerId"
                label="Buyer ID *"
                label-placement="floating"
                [readonly]="mode === 'read'">
              </ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="f['buyerId'].invalid && (f['buyerId'].dirty || f['buyerId'].touched) && mode !== 'read'">
              <small *ngIf="f['buyerId'].errors?.['required']">Buyer ID is required.</small>
            </ion-text>
          </ion-col>
        </ion-row>

        <!-- Buyer Name -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-input
                type="text"
                formControlName="buyerName"
                label="Buyer Name *"
                label-placement="floating"
                [readonly]="mode === 'read'">
              </ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="f['buyerName'].invalid && (f['buyerName'].dirty || f['buyerName'].touched) && mode !== 'read'">
              <small *ngIf="f['buyerName'].errors?.['required']">Buyer Name is required.</small>
            </ion-text>
          </ion-col>
        </ion-row>

        <!-- Address -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-textarea 
                formControlName="address" 
                label="Address *"
                label-placement="floating"
                [readonly]="mode === 'read'"
                rows="3">
              </ion-textarea>
            </ion-item>
            <ion-text color="danger" *ngIf="f['address'].invalid && (f['address'].dirty || f['address'].touched) && mode !== 'read'">
              <small *ngIf="f['address'].errors?.['required']">Address is required.</small>
            </ion-text>
          </ion-col>
        </ion-row>

        <!-- Phone -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-input
                type="tel"
                formControlName="phone"
                label="Phone *"
                label-placement="floating"
                [readonly]="mode === 'read'">
              </ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="f['phone'].invalid && (f['phone'].dirty || f['phone'].touched) && mode !== 'read'">
              <small *ngIf="f['phone'].errors?.['required']">Phone is required.</small>
            </ion-text>
          </ion-col>
        </ion-row>

        <!-- Email -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-input
                type="email"
                formControlName="email"
                label="Email *"
                label-placement="floating"
                [readonly]="mode === 'read'">
              </ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched) && mode !== 'read'">
              <small *ngIf="f['email'].errors?.['required']">Email is required.</small>
              <small *ngIf="f['email'].errors?.['email']">Enter a valid email.</small>
            </ion-text>
          </ion-col>
        </ion-row>

        <!-- GSTIN -->
        <ion-row>
          <ion-col size="12">
            <ion-item fill="outline" class="ion-margin-bottom">
              <ion-input
                type="text"
                formControlName="gstin"
                label="GSTIN"
                label-placement="floating"
                [readonly]="mode === 'read'">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>

        <!-- CREATE / UPDATE MODE -->
        <ion-row class="ion-margin-top ion-margin-bottom action-row" *ngIf="mode !== 'read'">
          <ion-col size="6">
            <ion-button
              expand="block"
              type="submit"
              color="primary"
              [disabled]="buyerForm.invalid">
              <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
              {{ mode === 'create' ? 'Submit' : 'Update' }}
            </ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button color="medium" fill="outline" expand="block" (click)="goBack()">
              <ion-icon name="close-circle-outline" slot="start"></ion-icon>
              Cancel
            </ion-button>
          </ion-col>
        </ion-row>

        <!-- READ MODE: Only Cancel Button -->
        <ion-row class="ion-margin-top ion-margin-bottom action-row" *ngIf="mode === 'read'">
          <ion-col size="12">
            <ion-button color="medium" fill="outline" expand="block" (click)="goBack()">
              <ion-icon name="close-circle-outline" slot="start"></ion-icon>
              Cancel
            </ion-button>
          </ion-col>
        </ion-row>

        </ion-grid>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
<app-footer></app-footer>
